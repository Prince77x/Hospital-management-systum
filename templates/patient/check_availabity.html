<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Doctor Availability</title>

<style>
body {
    font-family: Arial, sans-serif;
}

.container {
    width: 900px;
    margin: auto;
    border: 2px solid #333;
    padding: 20px;
}

h2 {
    margin-bottom: 20px;
}

/* table layout */
.availability-table {
    width: 100%;
    border-collapse: collapse;
}

.availability-table td {
    padding: 10px;
    vertical-align: middle;
}

/* date box */
.date-box {
    background: #e8f4ff;
    padding: 10px;
    border: 2px solid #333;
    width: 130px;
    text-align: center;
}

/* slot styles */
.slot {
    padding: 10px;
    border-radius: 6px;
    text-align: center;
    cursor: pointer;
    border: 2px solid;
    user-select: none;
}

.available {
    border-color: green;
    color: green;
}

.unavailable {
    border-color: red;
    color: red;
    cursor: not-allowed;
    opacity: 0.6;
}

.selected {
    background-color: #e6f0ff;
    border-color: #1a73e8;
    color: #1a73e8;
    font-weight: bold;
}

/* book button */
.book-btn {
    margin-top: 20px;
    padding: 10px 25px;
    border-radius: 8px;
    border: 2px solid green;
    background: white;
    color: green;
    font-size: 16px;
    cursor: pointer;
}
</style>
</head>

<body>

<div class="container">
<h2>Doctor's Availability</h2>

<form method="POST" id="bookingForm">
<input type="hidden" name="slot_id" id="selectedSlot">

<table class="availability-table">
{% for date, slots in grouped_slots.items() %}
<tr>
    <td>
        <div class="date-box">
            {{ date.strftime('%d/%m/%Y') }}
        </div>
    </td>

    {% for slot in slots %}
    <td>
        <div class="slot
             {% if slot.is_available %}available{% else %}unavailable{% endif %}"
             {% if slot.is_available %}
             onclick="selectSlot(this, '{{ slot.id }}')"
             {% endif %}>
            {{ slot.start_time.strftime('%H:%M') }} - {{ slot.end_time.strftime('%H:%M') }}
        </div>
    </td>
    {% endfor %}
</tr>
{% endfor %}
</table>

<button class="book-btn" type="submit">Book</button>
</form>
</div>

<script>
let selected = null;

function selectSlot(element, slotId) {
    if (selected) {
        selected.classList.remove("selected");
    }
    element.classList.add("selected");
    selected = element;
    document.getElementById("selectedSlot").value = slotId;
}
</script>

</body>
</html>
